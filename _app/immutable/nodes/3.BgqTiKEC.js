import{b as ka,g as pt,d as ut,f,h as xt,e as pe,a as s,t as M,s as C,c as Je,r as ze}from"../chunks/tMh-h1UU.js";import{i as mt}from"../chunks/B92wWaER.js";import{t as k,h as Pa,D as Ia,E as gt,F as ht,G as Da,H as bt,I as yt,J as wt,K as $t,L as Le,p as kt,o as Pt,M as It,l as Ee,k as Dt,f as ue,g as e,m as E,a as Ut,s as l,$ as St,b as o,c as r,d as re,i as Ua,r as t,q as ee}from"../chunks/4Z14Qsdb.js";import{i as c}from"../chunks/epDpuhXI.js";import{e as he,B as be,c as Sa,b as De,t as V,a as Tt,i as ye,g as se,h as Ue,j as jt,r as Ta,k as Bt}from"../chunks/BklcvC6Y.js";import{I as Se,b as Ct}from"../chunks/t8x5iSCf.js";import{L as fe}from"../chunks/VF2rYq1k.js";import{g as ja}from"../chunks/xIHaPDg4.js";import{S as Mt}from"../chunks/CFKmMrXd.js";import{X as Rt}from"../chunks/BoW7udwR.js";function Ba(ie,K,A=!1,n=!1,N=!1){var Z=ie,G="";k(()=>{var oe=gt;if(G===(G=K()??"")){Pa&&Ia();return}if(oe.nodes_start!==null&&(ht(oe.nodes_start,oe.nodes_end),oe.nodes_start=oe.nodes_end=null),G!==""){if(Pa){Da.data;for(var J=Ia(),le=J;J!==null&&(J.nodeType!==8||J.data!=="");)le=J,J=bt(J);if(J===null)throw yt(),wt;ka(Da,le),Z=$t(J);return}var ve=G+"";A?ve=`<svg>${ve}</svg>`:n&&(ve=`<math>${ve}</math>`);var ae=pt(ve);if((A||n)&&(ae=Le(ae)),ka(Le(ae),ae.lastChild),A||n)for(;Le(ae);)Z.before(Le(ae));else Z.before(ae)}})}function zt(ie,K,A){e(K)&&A(ie)}var Lt=f("<option> </option>"),Et=f('<div class="p-4 bg-blue-50 rounded-lg border border-blue-200"><div class="space-y-2"><div><!> <div class="flex gap-2 mt-2"><!> <!></div> <p class="text-xs text-gray-600 mt-1"><!></p></div></div></div>'),Ft=f('<p class="text-xs text-yellow-600"> </p>'),qt=f('<div class="p-4 bg-yellow-50 rounded-lg border border-yellow-200"><div class="flex items-center justify-between mb-2"><span class="text-sm font-medium text-yellow-800">æˆ‘çš„æ”¶è—å¤¹</span> <!></div> <!></div>'),Ot=f("<option> </option>"),Nt=f('<div class="space-y-2"><!> <select id="collection-type" class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"></select> <p class="text-sm text-orange-600">âš ï¸ æ‰‹åŠ¨è¾“å…¥åˆé›†IDæ—¶éœ€è¦æŒ‡å®šç±»å‹ï¼Œå»ºè®®ä»å³ä¾§åˆé›†åˆ—è¡¨ä¸­é€‰æ‹©</p></div>'),Wt=f('<p class="text-xs text-green-600 mt-1">âœ“ å·²è·å–åˆé›†åˆ—è¡¨ï¼Œè¯·åœ¨å³ä¾§é€‰æ‹©</p>'),At=f('<div class="space-y-2"><!> <!> <!></div>'),Ht=f('<p class="text-xs text-green-600 mt-1">âœ“ å·²ä»åˆ—è¡¨ä¸­é€‰æ‹©åˆé›†ï¼Œç±»å‹å·²è‡ªåŠ¨è¯†åˆ«</p>'),Vt=f('<p class="text-xs text-green-600 mt-1">âœ“ å·²é€‰æ‹©æ”¶è—å¤¹</p>'),Kt=(ie,K,A)=>{e(K)&&l(A,[])},Xt=f('<p class="text-xs text-purple-600 mt-1 ml-6">å‹¾é€‰åå°†ä¸‹è½½è¯¥ç•ªå‰§çš„æ‰€æœ‰å­£åº¦ï¼Œæ— éœ€å•ç‹¬é€‰æ‹©</p>'),Yt=f('<p class="text-xs text-purple-600 mt-1 ml-6">è¯·åœ¨å³ä¾§é€‰æ‹©è¦ä¸‹è½½çš„å­£åº¦</p>'),Gt=f('<div class="flex items-center space-x-2 mt-3"><input type="checkbox" id="download-all-seasons" class="h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"/> <!></div> <!>',1),Jt=f('<div class="space-y-2"><!> <!> <!> <!> <!></div>'),Qt=(ie,K,A,n,N,Z)=>{l(K,!1),l(A,[]),l(n,0),l(N,1),l(Z,0)},Zt=(ie,K,A)=>K(e(A)),er=f('<img loading="lazy" crossorigin="anonymous" referrerpolicy="no-referrer"/>'),ar=f("<div>æ— å›¾ç‰‡</div>"),tr=f('<p class="text-xs text-gray-500 line-clamp-2 mt-1 svelte-1xrdbru"> </p>'),rr=f('<button class="p-4 hover:bg-gray-50 border rounded-lg flex gap-3 text-left transition-colors items-start relative"><!> <div class="flex-1 min-w-0"><h4 class="font-medium text-sm truncate"><!></h4> <p class="text-xs text-gray-600 truncate mt-1"> </p> <!></div></button>'),sr=f('<div class="flex justify-center items-center gap-2 p-3 border-t"><!> <span class="text-sm text-gray-600"> </span> <!></div>'),ir=f('<div class="flex-1"><div class="bg-white rounded-lg border h-full overflow-hidden flex flex-col sticky top-6 max-h-[calc(100vh-200px)]"><div class="flex justify-between items-center p-4 border-b bg-gray-50"><div><span class="text-base font-medium">æœç´¢ç»“æœ</span> <span class="text-sm text-gray-600 ml-2"> </span></div> <button class="text-gray-500 hover:text-gray-700 text-xl p-1"><!></button></div> <div class="flex-1 overflow-y-auto p-3"><div class="grid grid-cols-3 gap-4"></div></div> <!></div></div>'),or=(ie,K,A)=>K(e(A)),lr=f('<img class="w-24 h-16 object-cover rounded flex-shrink-0" loading="lazy" crossorigin="anonymous" referrerpolicy="no-referrer"/>'),vr=f('<div class="w-24 h-16 bg-gray-200 rounded flex items-center justify-center text-xs text-gray-400 flex-shrink-0">æ— å°é¢</div>'),nr=f('<p class="text-xs text-gray-500 line-clamp-2 mt-1 svelte-1xrdbru"> </p>'),dr=f('<button class="p-4 hover:bg-gray-50 border rounded-lg text-left transition-colors"><div class="flex items-start gap-3"><!> <div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-1"><h4 class="font-medium text-sm truncate"> </h4> <span> </span></div> <p class="text-xs text-gray-600 mb-1"> </p> <p class="text-xs text-gray-600"> </p> <!></div></div></button>'),cr=f('<div class="flex-1"><div class="bg-white rounded-lg border h-full overflow-hidden flex flex-col sticky top-6 max-h-[calc(100vh-200px)]"><div class="flex justify-between items-center p-4 border-b bg-green-50"><div><span class="text-base font-medium text-green-800">UPä¸»åˆé›†åˆ—è¡¨</span> <span class="text-sm text-green-600 ml-2"> </span></div></div> <div class="flex-1 overflow-y-auto p-3"><div class="grid grid-cols-2 gap-4"></div></div></div></div>'),_r=(ie,K,A)=>K(e(A)),fr=f('<img class="w-24 h-16 object-cover rounded flex-shrink-0" loading="lazy" crossorigin="anonymous" referrerpolicy="no-referrer"/>'),pr=f('<div class="w-24 h-16 bg-gray-200 rounded flex items-center justify-center text-xs text-gray-400 flex-shrink-0">æ— å°é¢</div>'),ur=f('<p class="text-xs text-gray-500"> </p>'),xr=f('<button class="p-4 hover:bg-gray-50 border rounded-lg text-left transition-colors"><div class="flex items-start gap-3"><!> <div class="flex-1 min-w-0"><h4 class="font-medium text-sm truncate mb-1"> </h4> <p class="text-xs text-gray-600 mb-1"> </p> <p class="text-xs text-gray-600 mb-1"> </p> <!></div></div></button>'),mr=f('<div class="flex-1"><div class="bg-white rounded-lg border h-full overflow-hidden flex flex-col sticky top-6 max-h-[calc(100vh-200px)]"><div class="flex justify-between items-center p-4 border-b bg-yellow-50"><div><span class="text-base font-medium text-yellow-800">æˆ‘çš„æ”¶è—å¤¹</span> <span class="text-sm text-yellow-600 ml-2"> </span></div></div> <div class="flex-1 overflow-y-auto p-3"><div class="grid grid-cols-2 gap-4"></div></div></div></div>'),gr=f('<span class="text-xs text-purple-700 bg-purple-100 px-2 py-1 rounded"> <!></span>'),hr=f('<div class="p-4 text-center"><div class="text-sm text-purple-700">æ­£åœ¨åŠ è½½å­£åº¦ä¿¡æ¯...</div></div>'),br=f('<img class="w-20 h-28 object-cover rounded flex-shrink-0" loading="lazy" crossorigin="anonymous" referrerpolicy="no-referrer"/>'),yr=f('<div class="w-20 h-28 bg-gray-200 rounded flex items-center justify-center text-xs text-gray-400 flex-shrink-0">æ— å°é¢</div>'),wr=(ie,K,A)=>K(e(A).season_id),$r=f('<span class="text-xs bg-purple-100 text-purple-700 px-1.5 py-0.5 rounded">å½“å‰</span>'),kr=f('<div class="text-xs text-gray-600 mb-1"> </div>'),Pr=f("<br/> ",1),Ir=f('<div class="p-4 border rounded-lg hover:bg-purple-50 transition-colors"><div class="flex items-start gap-3"><!> <div class="flex-1 min-w-0"><div class="flex items-start gap-2 mb-2"><input type="checkbox" class="mt-0.5 h-4 w-4 rounded border-gray-300 text-purple-600 focus:ring-purple-500"/> <label class="flex-1 cursor-pointer"><div class="flex items-center gap-2 mb-1"><span class="font-medium text-sm text-gray-900"> </span> <!></div> <!> <div class="text-xs text-gray-500"> <!></div></label></div></div></div></div>'),Dr=f('<p class="text-xs text-purple-600 mt-4 text-center">ä¸é€‰æ‹©åˆ™ä»…ä¸‹è½½å·¦ä¾§è¾“å…¥çš„å½“å‰å­£åº¦</p>'),Ur=f('<div class="grid grid-cols-2 gap-4"></div> <!>',1),Sr=f('<div class="p-4 text-center"><div class="text-sm text-gray-500">æš‚æ— å­£åº¦ä¿¡æ¯</div> <div class="text-xs text-gray-400 mt-1">è¯·æ£€æŸ¥Season IDæ˜¯å¦æ­£ç¡®</div></div>'),Tr=f('<div class="flex-1"><div class="bg-white rounded-lg border h-full overflow-hidden flex flex-col sticky top-6 max-h-[calc(100vh-200px)]"><div class="flex justify-between items-center p-4 border-b bg-purple-50"><div><span class="text-base font-medium text-purple-800">é€‰æ‹©è¦ä¸‹è½½çš„å­£åº¦</span> <span class="text-sm text-purple-600 ml-2"><!></span></div> <!></div> <div class="flex-1 overflow-y-auto p-3"><!></div></div></div>'),jr=f('<img loading="lazy" crossorigin="anonymous" referrerpolicy="no-referrer"/>'),Br=f("<div>æ— å›¾ç‰‡</div>"),Cr=f('<p class="text-xs text-gray-500 line-clamp-4 mb-2 svelte-1xrdbru"> </p>'),Mr=f('<span class="flex items-center gap-1 text-gray-500"><span>â–¶</span> </span>'),Rr=f('<span class="flex items-center gap-1 text-gray-500"><span>ğŸ’¬</span> </span>'),zr=f('<span class="text-gray-500"> </span>'),Lr=f('<span class="text-gray-500"> </span>'),Er=f('<div class="fixed z-50 bg-white rounded-lg shadow-2xl border p-4 max-w-md pointer-events-none"><div class="flex gap-4"><!> <div class="flex-1 min-w-0"><h4 class="font-semibold text-sm mb-1"><!></h4> <p class="text-xs text-gray-600 mb-2"> </p> <!> <div class="flex flex-wrap gap-2 text-xs"><!> <!> <!> <!></div></div></div></div>'),Fr=f('<div class="py-2"><div class="mx-auto px-4"><div class="bg-card rounded-lg shadow-sm border p-6"><h1 class="text-2xl font-bold mb-6">æ·»åŠ æ–°è§†é¢‘æº</h1> <div class="flex gap-8"><div class="w-[600px] flex-shrink-0"><form class="space-y-6"><div class="space-y-2"><!> <select id="source-type" class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"></select> <p class="text-sm text-muted-foreground"> </p></div> <!> <!> <!> <!> <!> <div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!> <p class="text-sm text-muted-foreground">è¯·è¾“å…¥ç»å¯¹è·¯å¾„</p></div> <div class="flex gap-2"><!> <!></div></form></div> <!> <!> <!> <!></div></div></div></div> <!>',1);function Gr(ie,K){kt(K,!1);const A=E();let n=E("collection"),N=E(""),Z=E(""),G=E(""),oe=E(""),J=E("season"),le=E(!1),ve=E(!1),ae=E(!1),xe=E(""),me=E(!1),we=E([]),Te=E(!1),ne=E(1),ge=E(0),je=E(0),_e=E([]),Be=E(!1),de=E([]),Fe,te=E([]),$e=E(!1),Q=E([]),Ca,F=E(null),Ma,qe=E({x:0,y:0});const Qe=[{value:"collection",label:"åˆé›†",description:"è§†é¢‘åˆé›†ï¼Œéœ€è¦UPä¸»IDå’Œåˆé›†ID"},{value:"favorite",label:"æ”¶è—å¤¹",description:"æ”¶è—å¤¹IDå¯åœ¨æ”¶è—å¤¹é¡µé¢URLä¸­è·å–"},{value:"submission",label:"UPä¸»æŠ•ç¨¿",description:"UPä¸»IDå¯åœ¨UPä¸»ç©ºé—´URLä¸­è·å–"},{value:"watch_later",label:"ç¨åè§‚çœ‹",description:"åŒæ­¥ç¨åè§‚çœ‹åˆ—è¡¨"},{value:"bangumi",label:"ç•ªå‰§",description:"ç•ªå‰§season_idå¯åœ¨ç•ªå‰§é¡µé¢URLä¸­è·å–"}],Ra=[{value:"season",label:"åˆé›†",description:"Bç«™æ ‡å‡†åˆé›†"},{value:"series",label:"ç³»åˆ—",description:"è§†é¢‘ç³»åˆ—"}];Pt(()=>{Tt([{label:"ä¸»é¡µ",href:"/"},{label:"æ·»åŠ è§†é¢‘æº",isActive:!0}])}),It(()=>{clearTimeout(Ma),clearTimeout(Fe),clearTimeout(Ca)});async function Ce(a=1){if(!e(xe).trim()){V.error("è¯·è¾“å…¥æœç´¢å…³é”®è¯");return}let i;switch(e(n)){case"collection":case"submission":i="bili_user";break;case"bangumi":i="media_bangumi";break;default:i="video";break}l(me,!0);try{const v=await De.searchBilibili({keyword:e(xe),search_type:i,page:a,page_size:12});v.data.success?(l(we,v.data.results),l(ne,a),l(ge,Math.ceil(v.data.total/12)),l(je,v.data.total),l(Te,!0)):V.error("æœç´¢å¤±è´¥")}catch(v){console.error("æœç´¢å¤±è´¥:",v),V.error("æœç´¢å¤±è´¥",{description:v.message})}finally{l(me,!1)}}function za(a){switch(e(n)){case"collection":a.mid&&(l(Z,a.mid.toString()),Ze(),V.success("å·²å¡«å……UPä¸»ä¿¡æ¯",{description:"æ­£åœ¨è·å–åˆé›†åˆ—è¡¨..."}));break;case"submission":a.mid&&(l(N,a.mid.toString()),l(G,Oe(a.title)));break;case"bangumi":a.season_id&&(l(N,a.season_id),l(G,Oe(a.title)));break;case"favorite":default:a.bvid&&(l(N,a.bvid),l(G,Oe(a.title)));break}l(Te,!1),l(we,[]),l(xe,""),l(je,0),l(ne,1),l(ge,0),l(F,null),e(n)!=="collection"&&V.success("å·²å¡«å……ä¿¡æ¯",{description:"è¯·æ£€æŸ¥å¹¶å®Œå–„å…¶ä»–å¿…è¦ä¿¡æ¯"})}function Oe(a){const i=document.createElement("div");return i.innerHTML=a,i.textContent||i.innerText||a}function ke(a){return a?a.startsWith("https://")?a:a.startsWith("//")?"https:"+a:a.startsWith("http://")?a.replace("http://","https://"):a.startsWith("http")?a.split("@")[0]:"https://"+a:""}function Me(a){var b,I;const i=a.target;i.style.display="none";const v=i.parentElement;if(v&&!v.querySelector(".placeholder")){const j=document.createElement("div"),y=((b=i.className.match(/w-\d+/))==null?void 0:b[0])||"w-20",B=((I=i.className.match(/h-\d+/))==null?void 0:I[0])||"h-14";j.className=`placeholder ${y} ${B} bg-gray-200 rounded flex items-center justify-center text-xs text-gray-400`,j.textContent="æ— å›¾ç‰‡",v.appendChild(j)}}async function La(){if(e(n)!=="watch_later"&&!e(N)){V.error("è¯·è¾“å…¥ID");return}if(e(n)==="collection"&&!e(Z)){V.error("è¯·è¾“å…¥UPä¸»ID");return}if(!e(G)){V.error("è¯·è¾“å…¥åç§°");return}if(!e(oe)){V.error("è¯·è¾“å…¥ä¿å­˜è·¯å¾„");return}l(ve,!0);try{const a={source_type:e(n),source_id:e(N),name:e(G),path:e(oe)};e(n)==="collection"&&(a.up_id=e(Z),a.collection_type=e(J)),e(n)==="bangumi"&&(a.download_all_seasons=e(le),e(Q).length>0&&!e(le)&&(a.selected_seasons=e(Q)));const i=await De.addVideoSource(a);i.data.success?(V.success("æ·»åŠ æˆåŠŸ",{description:i.data.message}),ja("/")):V.error("æ·»åŠ å¤±è´¥",{description:i.data.message})}catch(a){console.error("æ·»åŠ è§†é¢‘æºå¤±è´¥:",a),V.error("æ·»åŠ å¤±è´¥",{description:a.message})}finally{l(ve,!1)}}async function Ea(){l(Be,!0);try{const a=await De.getUserFavorites();l(_e,a.data),e(_e).length===0&&V.info("æš‚æ— æ”¶è—å¤¹")}catch(a){console.error("è·å–æ”¶è—å¤¹å¤±è´¥:",a),V.error("è·å–æ”¶è—å¤¹å¤±è´¥",{description:a.message}),l(_e,[])}finally{l(Be,!1)}}function Fa(a){l(N,a.id.toString()),l(G,a.name||a.title),V.success("å·²é€‰æ‹©æ”¶è—å¤¹",{description:e(G)})}function Ze(){clearTimeout(Fe),e(Z).trim()?Fe=setTimeout(()=>{qa()},500):l(de,[])}async function qa(){if(e(Z).trim())try{const a=await De.getUserCollections(e(Z));a.data.success?(l(de,a.data.collections),e(de).length===0&&V.info("è¯¥UPä¸»æš‚æ— åˆé›†")):(V.error("è·å–åˆé›†åˆ—è¡¨å¤±è´¥"),l(de,[]))}catch(a){console.error("è·å–åˆé›†åˆ—è¡¨å¤±è´¥:",a),V.error("è·å–åˆé›†åˆ—è¡¨å¤±è´¥",{description:a.message}),l(de,[])}finally{}}function Oa(a){l(N,a.sid),l(G,a.name),l(J,a.collection_type),l(ae,!1),V.success("å·²é€‰æ‹©åˆé›†",{description:`${a.collection_type==="season"?"åˆé›†":"ç³»åˆ—"}ï¼š${a.name}`})}async function Na(){if(!(!e(N).trim()||e(n)!=="bangumi")){l($e,!0);try{const a=await De.getBangumiSeasons(e(N));if(a.data&&a.data.success){if(l(te,a.data.data||[]),e(te).length>0){const i=e(te).find(v=>v.season_id===e(N));i&&l(Q,[i.season_id])}}else l(te,[])}catch(a){console.error("è·å–å­£åº¦ä¿¡æ¯å¤±è´¥:",a),V.error("è·å–å­£åº¦ä¿¡æ¯å¤±è´¥",{description:a.message}),l(te,[]),l(Q,[])}finally{l($e,!1)}}}function Wa(a){e(Q).indexOf(a)===-1?l(Q,[...e(Q),a]):l(Q,e(Q).filter(v=>v!==a))}function Aa(a,i){l(F,a),ea(i)}function ea(a){const i=a.pageX+20,v=a.pageY-100;l(qe,{x:Math.max(10,i),y:Math.max(10,v)})}function Ha(){l(F,null)}Ee(()=>e(n),()=>{var a;l(A,((a=Qe.find(i=>i.value===e(n)))==null?void 0:a.description)||"")}),Ee(()=>e(n),()=>{e(n)!=="bangumi"&&(l(te,[]),l(Q,[]))}),Ee(()=>e(n),()=>{e(n)&&l(ae,!1)}),Ee(()=>(e(n),e(N)),()=>{e(n)==="bangumi"&&e(N)&&Na()}),Dt(),mt();var aa=Fr();xt(a=>{St.title="æ·»åŠ è§†é¢‘æº - Bili Sync"});var Ne=ue(aa),ta=r(Ne),ra=r(ta),sa=o(r(ra),2),We=r(sa),Ae=r(We),He=r(Ae),ia=r(He);fe(ia,{for:"source-type",children:(a,i)=>{re();var v=M("è§†é¢‘æºç±»å‹");s(a,v)},$$slots:{default:!0}});var Re=o(ia,2);k(()=>{e(n),Ua(()=>{})}),he(Re,5,()=>Qe,ye,(a,i)=>{var v=Lt(),b={},I=r(v,!0);t(v),k(()=>{b!==(b=e(i).value)&&(v.value=(v.__value=e(i).value)??""),C(I,e(i).label)}),s(a,v)}),t(Re);var oa=o(Re,2),Va=r(oa,!0);t(oa),t(He);var la=o(He,2);{var Ka=a=>{var i=Et(),v=r(i),b=r(v),I=r(b);fe(I,{for:"search",children:(m,g)=>{var w=Je(),$=ue(w);{var S=p=>{var h=M("æœç´¢UPä¸»");s(p,h)},x=(p,h)=>{{var d=T=>{var u=M("æœç´¢UPä¸»");s(T,u)},_=(T,u)=>{{var P=R=>{var O=M("æœç´¢ç•ªå‰§");s(R,O)},z=R=>{var O=M("æœç´¢Bç«™å†…å®¹");s(R,O)};c(T,R=>{e(n)==="bangumi"?R(P):R(z,!1)},u)}};c(p,T=>{e(n)==="submission"?T(d):T(_,!1)},h)}};c($,p=>{e(n)==="collection"?p(S):p(x,!1)})}s(m,w)},$$slots:{default:!0}});var j=o(I,2),y=r(j);const B=ee(()=>e(n)==="submission"||e(n)==="collection"?"æœç´¢UPä¸»...":e(n)==="bangumi"?"æœç´¢ç•ªå‰§...":"æœç´¢è§†é¢‘...");Se(y,{id:"search",get placeholder(){return e(B)},onkeydown:m=>m.key==="Enter"&&Ce(),get value(){return e(xe)},set value(m){l(xe,m)},$$legacy:!0});var q=o(y,2);const X=ee(()=>e(me)||!e(xe).trim());be(q,{onclick:()=>Ce(),get disabled(){return e(X)},size:"sm",children:(m,g)=>{var w=Je(),$=ue(w);{var S=p=>{var h=M("æœç´¢ä¸­...");s(p,h)},x=p=>{Mt(p,{class:"h-4 w-4"})};c($,p=>{e(me)?p(S):p(x,!1)})}s(m,w)},$$slots:{default:!0}}),t(j);var D=o(j,2),U=r(D);{var W=m=>{var g=M("æœç´¢UPä¸»åä¼šè‡ªåŠ¨å¡«å……UPä¸»IDï¼Œå¹¶æ˜¾ç¤ºè¯¥UPä¸»çš„æ‰€æœ‰åˆé›†ä¾›é€‰æ‹©");s(m,g)},L=(m,g)=>{{var w=S=>{var x=M("æœç´¢å¹¶é€‰æ‹©UPä¸»ï¼Œå°†è‡ªåŠ¨å¡«å……UPä¸»ID");s(S,x)},$=(S,x)=>{{var p=d=>{var _=M("æœç´¢å¹¶é€‰æ‹©ç•ªå‰§ï¼Œå°†è‡ªåŠ¨å¡«å……Season ID");s(d,_)},h=d=>{var _=M("æ ¹æ®å½“å‰é€‰æ‹©çš„è§†é¢‘æºç±»å‹æœç´¢å¯¹åº”å†…å®¹");s(d,_)};c(S,d=>{e(n)==="bangumi"?d(p):d(h,!1)},x)}};c(m,S=>{e(n)==="submission"?S(w):S($,!1)},g)}};c(U,m=>{e(n)==="collection"?m(W):m(L,!1)})}t(D),t(b),t(v),t(i),s(a,i)};c(la,a=>{e(n)!=="favorite"&&e(n)!=="watch_later"&&a(Ka)})}var va=o(la,2);{var Xa=a=>{var i=qt(),v=r(i),b=o(r(v),2);be(b,{size:"sm",variant:"outline",onclick:Ea,get disabled(){return e(Be)},children:(y,B)=>{re();var q=M();k(()=>C(q,e(Be)?"åŠ è½½ä¸­...":"è·å–æ”¶è—å¤¹")),s(y,q)},$$slots:{default:!0}}),t(v);var I=o(v,2);{var j=y=>{var B=Ft(),q=r(B);t(B),k(()=>C(q,`å·²è·å– ${e(_e).length??""} ä¸ªæ”¶è—å¤¹ï¼Œè¯·åœ¨å³ä¾§é€‰æ‹©`)),s(y,B)};c(I,y=>{e(_e).length>0&&y(j)})}t(i),s(a,i)};c(va,a=>{e(n)==="favorite"&&a(Xa)})}var na=o(va,2);{var Ya=a=>{var i=Nt(),v=r(i);fe(v,{for:"collection-type",children:(I,j)=>{re();var y=M("åˆé›†ç±»å‹");s(I,y)},$$slots:{default:!0}});var b=o(v,2);k(()=>{e(J),Ua(()=>{})}),he(b,5,()=>Ra,ye,(I,j)=>{var y=Ot(),B={},q=r(y,!0);t(y),k(()=>{B!==(B=e(j).value)&&(y.value=(y.__value=e(j).value)??""),C(q,e(j).label)}),s(I,y)}),t(b),re(2),t(i),Sa(b,()=>e(J),I=>l(J,I)),s(a,i)};c(na,a=>{e(n)==="collection"&&e(ae)&&a(Ya)})}var da=o(na,2);{var Ga=a=>{var i=At(),v=r(i);fe(v,{for:"up-id",children:(y,B)=>{re();var q=M("UPä¸»ID");s(y,q)},$$slots:{default:!0}});var b=o(v,2);Se(b,{id:"up-id",placeholder:"è¯·è¾“å…¥UPä¸»ID",onblur:Ze,required:!0,get value(){return e(Z)},set value(y){l(Z,y)},$$legacy:!0});var I=o(b,2);{var j=y=>{var B=Wt();s(y,B)};c(I,y=>{e(de).length>0&&y(j)})}t(i),s(a,i)};c(da,a=>{e(n)==="collection"&&a(Ga)})}var ca=o(da,2);{var Ja=a=>{var i=Jt(),v=r(i);fe(v,{for:"source-id",children:(U,W)=>{var L=Je(),m=ue(L);{var g=$=>{var S=M("åˆé›†ID");s($,S)},w=($,S)=>{{var x=h=>{var d=M("æ”¶è—å¤¹ID");s(h,d)},p=(h,d)=>{{var _=u=>{var P=M("UPä¸»ID");s(u,P)},T=(u,P)=>{{var z=O=>{var ce=M("Season ID");s(O,ce)},R=O=>{var ce=M("ID");s(O,ce)};c(u,O=>{e(n)==="bangumi"?O(z):O(R,!1)},P)}};c(h,u=>{e(n)==="submission"?u(_):u(T,!1)},d)}};c($,h=>{e(n)==="favorite"?h(x):h(p,!1)},S)}};c(m,$=>{e(n)==="collection"?$(g):$(w,!1)})}s(U,L)},$$slots:{default:!0}});var b=o(v,2);const I=ee(()=>`è¯·è¾“å…¥${e(n)==="collection"?"åˆé›†":e(n)==="favorite"?"æ”¶è—å¤¹":e(n)==="submission"?"UPä¸»":e(n)==="bangumi"?"Season":""}ID`);Se(b,{id:"source-id",get placeholder(){return e(I)},oninput:()=>{e(n)==="collection"&&l(ae,!0)},required:!0,get value(){return e(N)},set value(U){l(N,U)},$$legacy:!0});var j=o(b,2);{var y=U=>{var W=Ht();s(U,W)};c(j,U=>{e(n)==="collection"&&!e(ae)&&e(N)&&U(y)})}var B=o(j,2);{var q=U=>{var W=Vt();s(U,W)};c(B,U=>{e(n)==="favorite"&&e(N)&&U(q)})}var X=o(B,2);{var D=U=>{var W=Gt(),L=ue(W),m=r(L);Ta(m),m.__change=[Kt,le,Q];var g=o(m,2);fe(g,{for:"download-all-seasons",class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:(x,p)=>{re();var h=M("ä¸‹è½½æ‰€æœ‰å­£åº¦");s(x,h)},$$slots:{default:!0}}),t(L);var w=o(L,2);{var $=x=>{var p=Xt();s(x,p)},S=(x,p)=>{{var h=d=>{var _=Yt();s(d,_)};c(x,d=>{e(te).length>0&&d(h)},p)}};c(w,x=>{e(le)?x($):x(S,!1)})}Ct(m,()=>e(le),x=>l(le,x)),s(U,W)};c(X,U=>{e(n)==="bangumi"&&U(D)})}t(i),s(a,i)};c(ca,a=>{e(n)!=="watch_later"&&a(Ja)})}var Ve=o(ca,2),_a=r(Ve);fe(_a,{for:"name",children:(a,i)=>{re();var v=M("åç§°");s(a,v)},$$slots:{default:!0}});var Qa=o(_a,2);Se(Qa,{id:"name",placeholder:"è¯·è¾“å…¥è§†é¢‘æºåç§°",required:!0,get value(){return e(G)},set value(a){l(G,a)},$$legacy:!0}),t(Ve);var Ke=o(Ve,2),fa=r(Ke);fe(fa,{for:"path",children:(a,i)=>{re();var v=M("ä¿å­˜è·¯å¾„");s(a,v)},$$slots:{default:!0}});var Za=o(fa,2);Se(Za,{id:"path",placeholder:"ä¾‹å¦‚ï¼šD:/Videos/Bilibili",required:!0,get value(){return e(oe)},set value(a){l(oe,a)},$$legacy:!0}),re(2),t(Ke);var pa=o(Ke,2),ua=r(pa);be(ua,{type:"submit",get disabled(){return e(ve)},children:(a,i)=>{re();var v=M();k(()=>C(v,e(ve)?"æ·»åŠ ä¸­...":"æ·»åŠ ")),s(a,v)},$$slots:{default:!0}});var et=o(ua,2);be(et,{type:"button",variant:"outline",onclick:()=>ja("/"),children:(a,i)=>{re();var v=M("å–æ¶ˆ");s(a,v)},$$slots:{default:!0}}),t(pa),t(Ae),t(We);var xa=o(We,2);{var at=a=>{var i=ir(),v=r(i),b=r(v),I=r(b),j=o(r(I),2),y=r(j);t(j),t(I);var B=o(I,2);B.__click=[Qt,Te,we,je,ne,ge];var q=r(B);Rt(q,{class:"h-5 w-5"}),t(B),t(b);var X=o(b,2),D=r(X);he(D,5,()=>e(we),ye,(L,m)=>{var g=rr();g.__click=[Zt,za,m],g.__mousemove=[zt,F,ea];var w=r(g);{var $=P=>{var z=er();k(R=>{se(z,"src",R),se(z,"alt",e(m).title),Ue(z,1,`${e(n)==="bangumi"?"w-14 h-20":"w-20 h-14"} object-cover rounded flex-shrink-0`)},[()=>ke(e(m).cover)],ee),pe("error",z,Me),ze(z),s(P,z)},S=P=>{var z=ar();k(()=>Ue(z,1,`${e(n)==="bangumi"?"w-14 h-20":"w-20 h-14"} bg-gray-200 rounded flex items-center justify-center text-xs text-gray-600 flex-shrink-0`)),s(P,z)};c(w,P=>{e(m).cover?P($):P(S,!1)})}var x=o(w,2),p=r(x),h=r(p);Ba(h,()=>e(m).title),t(p);var d=o(p,2),_=r(d,!0);t(d);var T=o(d,2);{var u=P=>{var z=tr(),R=r(z,!0);t(z),k(()=>C(R,e(m).description)),s(P,z)};c(T,P=>{e(m).description&&P(u)})}t(x),t(g),k(()=>C(_,e(m).author)),pe("mouseenter",g,P=>Aa(e(m),P)),pe("mouseleave",g,Ha),s(L,g)}),t(D),t(X);var U=o(X,2);{var W=L=>{var m=sr(),g=r(m);const w=ee(()=>e(ne)<=1||e(me));be(g,{size:"sm",variant:"outline",onclick:()=>Ce(e(ne)-1),get disabled(){return e(w)},children:(h,d)=>{re();var _=M("ä¸Šä¸€é¡µ");s(h,_)},$$slots:{default:!0}});var $=o(g,2),S=r($);t($);var x=o($,2);const p=ee(()=>e(ne)>=e(ge)||e(me));be(x,{size:"sm",variant:"outline",onclick:()=>Ce(e(ne)+1),get disabled(){return e(p)},children:(h,d)=>{re();var _=M("ä¸‹ä¸€é¡µ");s(h,_)},$$slots:{default:!0}}),t(m),k(()=>C(S,`${e(ne)??""} / ${e(ge)??""}`)),s(L,m)};c(U,L=>{e(ge)>1&&L(W)})}t(v),t(i),k(()=>C(y,`å…±æ‰¾åˆ° ${e(je)??""} ä¸ªç»“æœï¼Œå½“å‰ç¬¬ ${e(ne)??""} é¡µ`)),s(a,i)};c(xa,a=>{e(Te)&&e(we).length>0&&a(at)})}var ma=o(xa,2);{var tt=a=>{var i=cr(),v=r(i),b=r(v),I=r(b),j=o(r(I),2),y=r(j);t(j),t(I),t(b);var B=o(b,2),q=r(B);he(q,5,()=>e(de),ye,(X,D)=>{var U=dr();U.__click=[or,Oa,D];var W=r(U),L=r(W);{var m=R=>{var O=lr();k(ce=>{se(O,"src",ce),se(O,"alt",e(D).name)},[()=>ke(e(D).cover)],ee),pe("error",O,Me),ze(O),s(R,O)},g=R=>{var O=vr();s(R,O)};c(L,R=>{e(D).cover?R(m):R(g,!1)})}var w=o(L,2),$=r(w),S=r($),x=r(S,!0);t(S);var p=o(S,2),h=r(p,!0);t(p),t($);var d=o($,2),_=r(d);t(d);var T=o(d,2),u=r(T);t(T);var P=o(T,2);{var z=R=>{var O=nr(),ce=r(O,!0);t(O),k(()=>C(ce,e(D).description)),s(R,O)};c(P,R=>{e(D).description&&R(z)})}t(w),t(W),t(U),k(()=>{C(x,e(D).name),Ue(p,1,`text-xs px-2 py-0.5 rounded flex-shrink-0 ${e(D).collection_type==="season"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`),C(h,e(D).collection_type==="season"?"åˆé›†":"ç³»åˆ—"),C(_,`ID: ${e(D).sid??""}`),C(u,`å…± ${e(D).total??""} ä¸ªè§†é¢‘`)}),s(X,U)}),t(q),t(B),t(v),t(i),k(()=>C(y,`å…± ${e(de).length??""} ä¸ªåˆé›†`)),s(a,i)};c(ma,a=>{e(n)==="collection"&&e(de).length>0&&a(tt)})}var ga=o(ma,2);{var rt=a=>{var i=mr(),v=r(i),b=r(v),I=r(b),j=o(r(I),2),y=r(j);t(j),t(I),t(b);var B=o(b,2),q=r(B);he(q,5,()=>e(_e),ye,(X,D)=>{var U=xr();U.__click=[_r,Fa,D];var W=r(U),L=r(W);{var m=u=>{var P=fr();k(z=>{se(P,"src",z),se(P,"alt",e(D).name||e(D).title)},[()=>ke(e(D).cover)],ee),pe("error",P,Me),ze(P),s(u,P)},g=u=>{var P=pr();s(u,P)};c(L,u=>{e(D).cover?u(m):u(g,!1)})}var w=o(L,2),$=r(w),S=r($,!0);t($);var x=o($,2),p=r(x);t(x);var h=o(x,2),d=r(h);t(h);var _=o(h,2);{var T=u=>{var P=ur(),z=r(P);t(P),k(R=>C(z,`åˆ›å»ºäº ${R??""}`),[()=>new Date(e(D).created*1e3).toLocaleDateString()],ee),s(u,P)};c(_,u=>{e(D).created&&u(T)})}t(w),t(W),t(U),k(()=>{C(S,e(D).name||e(D).title),C(p,`æ”¶è—å¤¹ID: ${e(D).id??""}`),C(d,`å…± ${e(D).media_count??""} ä¸ªè§†é¢‘`)}),s(X,U)}),t(q),t(B),t(v),t(i),k(()=>C(y,`å…± ${e(_e).length??""} ä¸ªæ”¶è—å¤¹`)),s(a,i)};c(ga,a=>{e(n)==="favorite"&&e(_e).length>0&&a(rt)})}var st=o(ga,2);{var it=a=>{var i=Tr(),v=r(i),b=r(v),I=r(b),j=o(r(I),2),y=r(j);{var B=g=>{var w=M("æ­£åœ¨åŠ è½½...");s(g,w)},q=(g,w)=>{{var $=x=>{var p=M();k(()=>C(p,`å…± ${e(te).length??""} ä¸ªç›¸å…³å­£åº¦`)),s(x,p)},S=x=>{var p=M("æš‚æ— å­£åº¦ä¿¡æ¯");s(x,p)};c(g,x=>{e(te).length>0?x($):x(S,!1)},w)}};c(y,g=>{e($e)?g(B):g(q,!1)})}t(j),t(I);var X=o(I,2);{var D=g=>{var w=gr(),$=r(w),S=o($);{var x=p=>{var h=M("ï¼ˆå…¨éƒ¨ï¼‰");s(p,h)};c(S,p=>{e(Q).length===e(te).length&&p(x)})}t(w),k(()=>C($,`å·²é€‰æ‹© ${e(Q).length??""} ä¸ª `)),s(g,w)};c(X,g=>{e(Q).length>0&&g(D)})}t(b);var U=o(b,2),W=r(U);{var L=g=>{var w=hr();s(g,w)},m=(g,w)=>{{var $=x=>{var p=Ur(),h=ue(p);he(h,5,()=>e(te),ye,(T,u)=>{var P=Ir(),z=r(P),R=r(z);{var O=H=>{var Y=br();k(Ie=>{se(Y,"src",Ie),se(Y,"alt",e(u).season_title||e(u).title)},[()=>ke(e(u).cover)],ee),pe("error",Y,Me),ze(Y),s(H,Y)},ce=H=>{var Y=yr();s(H,Y)};c(R,H=>{e(u).cover?H(O):H(ce,!1)})}var ha=o(R,2),ba=r(ha),Pe=r(ba);Ta(Pe),Pe.__change=[wr,Wa,u];var Xe=o(Pe,2),Ye=r(Xe),Ge=r(Ye),vt=r(Ge,!0);t(Ge);var nt=o(Ge,2);{var dt=H=>{var Y=$r();s(H,Y)};c(nt,H=>{e(u).season_id===e(N)&&H(dt)})}t(Ye);var ya=o(Ye,2);{var ct=H=>{var Y=kr(),Ie=r(Y,!0);t(Y),k(()=>C(Ie,e(u).full_title)),s(H,Y)};c(ya,H=>{e(u).full_title&&e(u).full_title!==e(u).season_title&&H(ct)})}var wa=o(ya,2),$a=r(wa),_t=o($a);{var ft=H=>{var Y=Pr(),Ie=o(ue(Y));k(()=>C(Ie,`Media ID: ${e(u).media_id??""}`)),s(H,Y)};c(_t,H=>{e(u).media_id&&H(ft)})}t(wa),t(Xe),t(ba),t(ha),t(z),t(P),k(H=>{se(Pe,"id",`season-${e(u).season_id??""}`),Bt(Pe,H),se(Xe,"for",`season-${e(u).season_id??""}`),C(vt,e(u).season_title||e(u).title),C($a,`Season ID: ${e(u).season_id??""} `)},[()=>e(Q).includes(e(u).season_id)],ee),s(T,P)}),t(h);var d=o(h,2);{var _=T=>{var u=Dr();s(T,u)};c(d,T=>{!e($e)&&e(te).length>0&&T(_)})}s(x,p)},S=(x,p)=>{{var h=d=>{var _=Sr();s(d,_)};c(x,d=>{e(N)&&d(h)},p)}};c(g,x=>{e(te).length>0?x($):x(S,!1)},w)}};c(W,g=>{e($e)?g(L):g(m,!1)})}t(U),t(v),t(i),s(a,i)};c(st,a=>{e(n)==="bangumi"&&e(N)&&!e(le)&&a(it)})}t(sa),t(ra),t(ta),t(Ne);var ot=o(Ne,2);{var lt=a=>{var i=Er(),v=r(i),b=r(v);{var I=d=>{var _=jr();k(T=>{se(_,"src",T),se(_,"alt",e(F).title),Ue(_,1,`${e(n)==="bangumi"?"w-24 h-32":"w-32 h-20"} object-cover rounded flex-shrink-0`)},[()=>ke(e(F).cover)],ee),s(d,_)},j=d=>{var _=Br();k(()=>Ue(_,1,`${e(n)==="bangumi"?"w-24 h-32":"w-32 h-20"} bg-gray-200 rounded flex items-center justify-center text-sm text-gray-400 flex-shrink-0`)),s(d,_)};c(b,d=>{e(F).cover?d(I):d(j,!1)})}var y=o(b,2),B=r(y),q=r(B);Ba(q,()=>e(F).title),t(B);var X=o(B,2),D=r(X);t(X);var U=o(X,2);{var W=d=>{var _=Cr(),T=r(_,!0);t(_),k(()=>C(T,e(F).description)),s(d,_)};c(U,d=>{e(F).description&&d(W)})}var L=o(U,2),m=r(L);{var g=d=>{var _=Mr(),T=o(r(_));t(_),k(u=>C(T,` æ’­æ”¾ï¼š${u??""}`),[()=>e(F).play>1e4?(e(F).play/1e4).toFixed(1)+"ä¸‡":e(F).play],ee),s(d,_)};c(m,d=>{e(F).play&&d(g)})}var w=o(m,2);{var $=d=>{var _=Rr(),T=o(r(_));t(_),k(u=>C(T,` å¼¹å¹•ï¼š${u??""}`),[()=>e(F).danmaku>1e4?(e(F).danmaku/1e4).toFixed(1)+"ä¸‡":e(F).danmaku],ee),s(d,_)};c(w,d=>{e(F).danmaku&&d($)})}var S=o(w,2);{var x=d=>{var _=zr(),T=r(_);t(_),k(()=>C(T,`Season ID: ${e(F).season_id??""}`)),s(d,_)};c(S,d=>{e(n)==="bangumi"&&e(F).season_id&&d(x)})}var p=o(S,2);{var h=d=>{var _=Lr(),T=r(_);t(_),k(()=>C(T,`BVå·: ${e(F).bvid??""}`)),s(d,_)};c(p,d=>{e(F).bvid&&d(h)})}t(L),t(y),t(v),t(i),k(()=>{jt(i,`left: ${e(qe).x??""}px; top: ${e(qe).y??""}px;`),C(D,`ä½œè€…ï¼š${e(F).author??""}`)}),s(a,i)};c(ot,a=>{e(F)&&a(lt)})}k(()=>C(Va,e(A))),pe("submit",Ae,a=>{a.preventDefault(),La()}),Sa(Re,()=>e(n),a=>l(n,a)),s(ie,aa),Ut()}ut(["change","click","mousemove"]);export{Gr as component};
