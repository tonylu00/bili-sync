# 常见问题

## 安装相关

### Q: Docker 容器无法启动？
A: 检查端口是否被占用，确保挂载路径有读写权限。

### Q: 如何查看程序版本？
A: 启动时日志会显示版本号，或访问 Web 界面的设置页面。

## 凭据相关

### Q: 如何获取 B站凭据？
A: 
1. 登录 bilibili.com
2. F12 打开开发者工具
3. Application > Cookies > bilibili.com
4. 找到 SESSDATA、bili_jct、DedeUserID

### Q: 凭据过期了怎么办？
A: 重新获取并在设置页面更新即可，已下载的内容不受影响。

## 下载相关

### Q: 下载失败怎么办？
A: 
- 检查凭据是否有效
- 查看日志了解具体错误
- 系统会自动重试失败的任务

### Q: 支持什么画质？
A: 自动选择账号权限内的最高画质，大会员支持 4K。

### Q: 下载速度慢？
A: 在设置中增加下载线程数（默认 16）。

## 功能相关

### Q: 如何过滤不想要的视频？
A: 在视频源设置中配置过滤规则：
- 时间过滤
- 时长过滤
- 关键词过滤

### Q: 支持弹幕下载吗？
A: 支持，默认下载 XML 格式弹幕文件。

### Q: 为什么 AI 字幕无法下载？
A: AI 字幕（自动生成字幕）需要有效的登录 Cookie（至少包含 SESSDATA、bili_jct、DedeUserID）。确保凭据未过期，并在请求字幕时保持登录状态，否则接口会返回空数据或 403，导致字幕文件缺失。

### Q: 可以下载会员专享视频吗？
A: 需要使用大会员账号的凭据。

### Q: 一直无法下载，提示Operation not permitted 怎么办？
A: 
- 项目更新后，和教程有点不一样了，特别是更新为webUI，不用在配置文件里面写映射时。
- 现在不用再把下载目录映射为原来固定的某个目录。
- 例如：/media，或者/download，而是直接把你要下载文件的目录映射出来，不用理会项目内部目录。
- 你可以按照这个方法，试一下。希望能帮到你。

## 故障排除

### Q: Web 界面打不开？
A: 
- 确认程序正在运行
- 检查防火墙设置
- 尝试 http://127.0.0.1:12345

### Q: 日志在哪里查看？
A: Web 界面的"日志"页面可以实时查看，或查看 data 目录下的日志文件。

### Q: 如何重置所有配置？
A: 删除 data 目录下的 data.sqlite 文件，重启程序。

## 媒体服务器相关

### Q: Jellyfin 中字幕显示为方块怎么办？
A: 这是 Jellyfin 字幕渲染的常见问题，特别是 ASS 格式的弹幕字幕。解决方案：

1. **检查 Jellyfin 的字幕渲染设置**
   - 在 Jellyfin 管理面板中：控制台 → 播放 → 字幕
   - 确保字幕模式设置为"始终烧录"或"自动"
   - 不要选择"仅限图像格式"

2. **检查转码设置**
   - 控制台 → 播放 → 转码
   - 启用"允许字幕提取"
   - 字幕编码器设置为"自动"或"srt"

3. **强制字幕烧录**
   - 播放时点击齿轮图标 → 质量
   - 选择一个需要转码的质量（不是"直接播放"）
   - 这会强制 Jellyfin 将字幕烧录到视频中

4. **安装服务器字体（Linux）**
   ```bash
   # 安装中文字体
   sudo apt-get install fonts-noto-cjk
   # 或
   sudo apt-get install fonts-wqy-microhei fonts-wqy-zenhei
   # 刷新字体缓存
   fc-cache -fv
   ```

5. **客户端解决方案**
   - 使用 Chrome/Edge 浏览器效果更好
   - 尝试使用 Jellyfin 客户端而不是 Web 界面
   - 移动设备使用官方 Jellyfin 应用

注意：如果 Emby 能正常显示同样的字幕文件，说明文件本身没问题，是 Jellyfin 的渲染配置问题。

## 其他问题

更多问题请访问 [GitHub Issues](https://github.com/qq1582185982/bili-sync-01/issues)